Options +FollowSymLinks
RewriteEngine On

# Redirect direct .php requests to extensionless URLs (force absolute path to avoid leaking FS path on Windows)
RewriteCond %{THE_REQUEST} \s/([^.]+)\.php[\s?]
RewriteRule ^ /%1 [R=301,L,NE]

# Redirect /index or /index.php to site root
RewriteRule ^index(\.php)?$ / [R=301,L]

# Serve extensionless URLs by mapping to .php files
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L]

